<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/topbarCoordinador :: head('Inicio')}"></head>
  <body data-sidebar="dark" class="vertical-collpsed">
    <div id="layout-wrapper">
      <div th:replace="~{fragments/topbarCoordinador :: topbar('Inicio')}"></div>
      <div th:replace="~{fragments/sidebarCoordinador :: sidebar('inicio')}"></div>


      <!-- ============================================================== -->
      <!-- Start right Content here -->
      <!-- ============================================================== -->

      <!-- Hidden input para pasar el userId al JavaScript -->
      <input type="hidden" id="currentUserId" th:value="${currentUserId}"/>

      <div class="main-content">
        <div class="page-content">
          <div class="container-fluid">
            <div class="row">
              <div class="col-xl-4 d-flex flex-column mb-4">
                <div class="card flex-grow-1 mb-4">
                  <div class="card-body">
                    <h4 class="card-title mb-4 fw-semibold">Estadísticas de asistencia</h4>
                    <div id="donut-chart" class="apex-charts"></div>
                    <!-- Leyenda será generada dinámicamente por JavaScript -->
                    <div id="donut-chart-legend" class="row"></div>
                  </div>
                </div>
                <div class="card flex-grow-1 mb-0">
                  <div class="card-body">
                    <h4 class="card-title mb-4 fw-semibold">Último aviso</h4>
                    <div data-simplebar>
                      <div th:if="${ultimoAviso != null}">
                        <h5 class="font-size-14" th:text="${ultimoAviso.tituloAviso}"></h5>
                        <p class="text-muted mb-2" th:text="${ultimoAviso.textoAviso}"></p>
                        <img th:src="${ultimoAviso.fotoAvisoUrl}" alt="Foto del aviso" class="img-fluid mb-2" style="width: 100%; height: 250px; object-fit: cover;" />
                        <small class="text-muted" th:text="${#temporals.format(ultimoAviso.fechaAviso, 'dd MMM, yyyy HH:mm')}"></small>
                      </div>
                      <div th:if="${ultimoAviso == null}">
                        <p class="text-muted mb-0">No hay avisos disponibles.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div> <!-- end col-->
              <div class="col-xl-8 mb-4">
                <div class="card h-100 mb-0">
                  <div class="card-body">
                    <div id="calendar"></div>
                  </div>
                </div>
              </div> <!-- end col -->
            </div> <!-- end row-->
            <div style='clear:both'></div>
          </div> <!-- container-fluid -->
        </div>
        <!-- End Page-content -->
        <footer th:replace="fragments/topbarCoordinador :: footer"></footer>
      </div>
      <!-- end main content-->
    </div>
    <!-- END layout-wrapper -->

    <div class="sidebar-overlay"></div>

    <div th:replace="fragments/topbarCoordinador :: scripts"></div>
    <!-- Init js -->
    <script th:src="@{/assets/js/pages/inicio.init.js}"></script>
    <!-- App js -->
    <script th:src="@{/superadmin/assets/js/app.js}"></script>
  </body>
</html>